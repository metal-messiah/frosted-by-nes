{"version":3,"file":"static/js/metrics-aggregate.541d5f0a.chunk.js","mappings":"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","sources":["../node_modules/@newrelic/browser-agent/dist/esm/features/metrics/aggregate/framework-detection.js","../node_modules/@newrelic/browser-agent/dist/esm/features/metrics/aggregate/index.js"],"sourcesContent":["import { isBrowserScope } from '../../../common/constants/runtime';\nconst FRAMEWORKS = {\n  REACT: 'React',\n  NEXTJS: 'NextJS',\n  VUE: 'Vue',\n  NUXTJS: 'NuxtJS',\n  ANGULAR: 'Angular',\n  ANGULARUNIVERSAL: 'AngularUniversal',\n  SVELTE: 'Svelte',\n  SVELTEKIT: 'SvelteKit',\n  PREACT: 'Preact',\n  PREACTSSR: 'PreactSSR',\n  ANGULARJS: 'AngularJS',\n  BACKBONE: 'Backbone',\n  EMBER: 'Ember',\n  METEOR: 'Meteor',\n  ZEPTO: 'Zepto',\n  JQUERY: 'Jquery',\n  MOOTOOLS: 'MooTools',\n  QWIK: 'Qwik',\n  ELECTRON: 'Electron'\n};\nexport function getFrameworks() {\n  if (!isBrowserScope) return []; // don't bother detecting frameworks if not in the main window context\n\n  const frameworks = [];\n  try {\n    if (detectReact()) {\n      frameworks.push(FRAMEWORKS.REACT);\n      if (detectNextJS()) frameworks.push(FRAMEWORKS.NEXTJS);\n    }\n    if (detectVue()) {\n      frameworks.push(FRAMEWORKS.VUE);\n      if (detectNuxtJS()) frameworks.push(FRAMEWORKS.NUXTJS);\n    }\n    if (detectAngular()) {\n      frameworks.push(FRAMEWORKS.ANGULAR);\n      if (detectAngularUniversal()) frameworks.push(FRAMEWORKS.ANGULARUNIVERSAL);\n    }\n    if (detectSvelte()) {\n      frameworks.push(FRAMEWORKS.SVELTE);\n      if (detectSvelteKit()) frameworks.push(FRAMEWORKS.SVELTEKIT);\n    }\n    if (detectPreact()) {\n      frameworks.push(FRAMEWORKS.PREACT);\n      if (detectPreactSSR()) frameworks.push(FRAMEWORKS.PREACTSSR);\n    }\n    if (detectAngularJs()) frameworks.push(FRAMEWORKS.ANGULARJS);\n    if (Object.prototype.hasOwnProperty.call(window, 'Backbone')) frameworks.push(FRAMEWORKS.BACKBONE);\n    if (Object.prototype.hasOwnProperty.call(window, 'Ember')) frameworks.push(FRAMEWORKS.EMBER);\n    if (Object.prototype.hasOwnProperty.call(window, 'Meteor')) frameworks.push(FRAMEWORKS.METEOR);\n    if (Object.prototype.hasOwnProperty.call(window, 'Zepto')) frameworks.push(FRAMEWORKS.ZEPTO);\n    if (Object.prototype.hasOwnProperty.call(window, 'jQuery')) frameworks.push(FRAMEWORKS.JQUERY);\n    if (Object.prototype.hasOwnProperty.call(window, 'MooTools')) frameworks.push(FRAMEWORKS.MOOTOOLS);\n    if (Object.prototype.hasOwnProperty.call(window, 'qwikevents')) frameworks.push(FRAMEWORKS.QWIK);\n    if (detectElectron()) frameworks.push(FRAMEWORKS.ELECTRON);\n  } catch (err) {\n    // Possibly not supported\n  }\n  return frameworks;\n}\nfunction detectReact() {\n  try {\n    return Object.prototype.hasOwnProperty.call(window, 'React') || Object.prototype.hasOwnProperty.call(window, 'ReactDOM') || Object.prototype.hasOwnProperty.call(window, 'ReactRedux') || document.querySelector('[data-reactroot], [data-reactid]') || (() => {\n      const divs = document.querySelectorAll('body > div');\n      for (let i = 0; i < divs.length; i++) {\n        if (Object.prototype.hasOwnProperty.call(divs[i], '_reactRootContainer')) {\n          return true;\n        }\n      }\n    })();\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectNextJS() {\n  // React SSR\n  try {\n    return Object.prototype.hasOwnProperty.call(window, 'next') && Object.prototype.hasOwnProperty.call(window.next, 'version');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectVue() {\n  try {\n    return Object.prototype.hasOwnProperty.call(window, 'Vue');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectNuxtJS() {\n  // Vue SSR\n  try {\n    return Object.prototype.hasOwnProperty.call(window, '$nuxt') && Object.prototype.hasOwnProperty.call(window.$nuxt, 'nuxt');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectAngular() {\n  try {\n    return Object.prototype.hasOwnProperty.call(window, 'ng') || document.querySelector('[ng-version]');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectAngularUniversal() {\n  // Anguler SSR\n  try {\n    return document.querySelector('[ng-server-context]');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectSvelte() {\n  try {\n    return Object.prototype.hasOwnProperty.call(window, '__svelte');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectSvelteKit() {\n  // Svelte SSR\n  try {\n    return !!Object.keys(window).find(prop => prop.startsWith('__sveltekit'));\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectPreact() {\n  try {\n    return Object.prototype.hasOwnProperty.call(window, 'preact');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectPreactSSR() {\n  // Svelte SSR\n  try {\n    return document.querySelector('script[type=\"__PREACT_CLI_DATA__\"]');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectAngularJs() {\n  try {\n    return Object.prototype.hasOwnProperty.call(window, 'angular') || document.querySelector('.ng-binding, [ng-app], [data-ng-app], [ng-controller], [data-ng-controller], [ng-repeat], [data-ng-repeat]') || document.querySelector('script[src*=\"angular.js\"], script[src*=\"angular.min.js\"]');\n  } catch (err) {\n    return false;\n  }\n}\nfunction detectElectron() {\n  try {\n    return typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0;\n  } catch (err) {\n    return false;\n  }\n}","import { getRuntime, getConfiguration } from '../../../common/config/config';\nimport { registerHandler } from '../../../common/event-emitter/register-handler';\nimport { HarvestScheduler } from '../../../common/harvest/harvest-scheduler';\nimport { FEATURE_NAME, SUPPORTABILITY_METRIC, CUSTOM_METRIC, SUPPORTABILITY_METRIC_CHANNEL, CUSTOM_METRIC_CHANNEL } from '../constants';\nimport { getFrameworks } from './framework-detection';\nimport { isFileProtocol } from '../../../common/url/protocol';\nimport { getRules, validateRules } from '../../../common/util/obfuscate';\nimport { onDOMContentLoaded } from '../../../common/window/load';\nimport { windowAddEventListener } from '../../../common/event-listener/event-listener-opts';\nimport { isBrowserScope, isWorkerScope } from '../../../common/constants/runtime';\nimport { AggregateBase } from '../../utils/aggregate-base';\nexport class Aggregate extends AggregateBase {\n  static featureName = FEATURE_NAME;\n  constructor(agentIdentifier, aggregator) {\n    super(agentIdentifier, aggregator, FEATURE_NAME);\n    let scheduler;\n\n    // If RUM-call's response determines that customer lacks entitlements for the /jserror ingest endpoint, don't harvest at all.\n    registerHandler('block-err', () => {\n      this.blocked = true;\n      if (scheduler) scheduler.aborted = true; // RUM response may or may not have happened already before scheduler initialization below\n    }, this.featureName, this.ee);\n\n    // Allow features external to the metrics feature to capture SMs and CMs through the event emitter\n    registerHandler(SUPPORTABILITY_METRIC_CHANNEL, this.storeSupportabilityMetrics.bind(this), this.featureName, this.ee);\n    registerHandler(CUSTOM_METRIC_CHANNEL, this.storeEventMetrics.bind(this), this.featureName, this.ee);\n    this.singleChecks(); // checks that are run only one time, at script load\n    this.eachSessionChecks(); // the start of every time user engages with page\n\n    this.ee.on(\"drain-\".concat(this.featureName), () => {\n      // *cli, Mar 23 - Per NR-94597, this feature should only harvest ONCE at the (potential) EoL time of the page.\n      scheduler = new HarvestScheduler('jserrors', {\n        onUnload: () => this.unload()\n      }, this);\n      scheduler.harvest.on('jserrors', () => ({\n        body: this.aggregator.take(['cm', 'sm'])\n      }));\n    }); // this is needed to ensure EoL is \"on\" and sent\n\n    this.drain();\n  }\n  storeSupportabilityMetrics(name, value) {\n    if (this.blocked) return;\n    const type = SUPPORTABILITY_METRIC;\n    const params = {\n      name\n    };\n    this.aggregator.storeMetric(type, name, params, value);\n  }\n  storeEventMetrics(name, metrics) {\n    if (this.blocked) return;\n    const type = CUSTOM_METRIC;\n    const params = {\n      name\n    };\n    this.aggregator.store(type, name, params, metrics);\n  }\n  singleChecks() {\n    // report loaderType\n    const {\n      distMethod,\n      loaderType\n    } = getRuntime(this.agentIdentifier);\n    if (loaderType) this.storeSupportabilityMetrics(\"Generic/LoaderType/\".concat(loaderType, \"/Detected\"));\n    if (distMethod) this.storeSupportabilityMetrics(\"Generic/DistMethod/\".concat(distMethod, \"/Detected\"));\n    if (isBrowserScope) {\n      this.storeSupportabilityMetrics('Generic/Runtime/Browser/Detected');\n      const nonce = document?.currentScript?.nonce;\n      if (nonce && nonce !== '') {\n        this.storeSupportabilityMetrics('Generic/Runtime/Nonce/Detected');\n      }\n\n      // These SMs are used by the AppExp team\n      onDOMContentLoaded(() => {\n        getFrameworks().forEach(framework => {\n          this.storeSupportabilityMetrics('Framework/' + framework + '/Detected');\n        });\n      });\n    } else if (isWorkerScope) {\n      this.storeSupportabilityMetrics('Generic/Runtime/Worker/Detected');\n    } else {\n      this.storeSupportabilityMetrics('Generic/Runtime/Unknown/Detected');\n    }\n\n    // Track if the agent is being loaded using a file protocol such as is the case in some\n    // set-top box applications or Electron applications\n    if (isFileProtocol()) {\n      this.storeSupportabilityMetrics('Generic/FileProtocol/Detected');\n    }\n\n    // Capture SMs to assess customer engagement with the obfuscation config\n    const rules = getRules(this.agentIdentifier);\n    if (rules.length > 0) this.storeSupportabilityMetrics('Generic/Obfuscate/Detected');\n    if (rules.length > 0 && !validateRules(rules)) this.storeSupportabilityMetrics('Generic/Obfuscate/Invalid');\n\n    // Check if proxy for either chunks or beacon is being used\n    const {\n      proxy\n    } = getConfiguration(this.agentIdentifier);\n    if (proxy.assets) this.storeSupportabilityMetrics('Config/AssetsUrl/Changed');\n    if (proxy.beacon) this.storeSupportabilityMetrics('Config/BeaconUrl/Changed');\n  }\n  eachSessionChecks() {\n    if (!isBrowserScope) return;\n\n    // [Temporary] Report restores from BFCache to NR1 while feature flag is in place in lieu of sending pageshow events.\n    windowAddEventListener('pageshow', evt => {\n      if (evt.persisted) {\n        this.storeSupportabilityMetrics('Generic/BFCache/PageRestored');\n      }\n    });\n  }\n  unload() {\n    try {\n      if (this.resourcesSent) return;\n      this.resourcesSent = true; // make sure this only gets sent once\n\n      const agentRuntime = getRuntime(this.agentIdentifier);\n\n      // Capture SMs around network resources using the performance API to assess\n      // work to split this out from the ST nodes\n      // differentiate between internal+external and ajax+non-ajax\n      const ajaxResources = ['beacon', 'fetch', 'xmlhttprequest'];\n      const internalUrls = ['nr-data.net', 'newrelic.com', 'nr-local.net', 'localhost'];\n      function isInternal(x) {\n        return internalUrls.some(y => x.name.indexOf(y) >= 0);\n      }\n      function isAjax(x) {\n        return ajaxResources.includes(x.initiatorType);\n      }\n      const allResources = performance?.getEntriesByType('resource') || [];\n      allResources.forEach(entry => {\n        if (isInternal(entry)) {\n          if (isAjax(entry)) this.storeSupportabilityMetrics('Generic/Resources/Ajax/Internal');else this.storeSupportabilityMetrics('Generic/Resources/Non-Ajax/Internal');\n        } else {\n          if (isAjax(entry)) this.storeSupportabilityMetrics('Generic/Resources/Ajax/External');else this.storeSupportabilityMetrics('Generic/Resources/Non-Ajax/External');\n        }\n      });\n\n      // Capture SMs for session trace if active (`ptid` is set when returned by replay ingest).\n      // Retain these SMs while we are working through the session_replay feature\n      if (agentRuntime.ptid) {\n        this.storeSupportabilityMetrics('PageSession/Feature/SessionTrace/DurationMs', Math.round(performance.now()));\n      }\n\n      // Capture SMs for performance markers and measures to assess the usage and possible inclusion of this\n      // data in the agent for use in NR\n      if (typeof performance !== 'undefined') {\n        const markers = performance.getEntriesByType('mark');\n        const measures = performance.getEntriesByType('measure');\n        this.storeSupportabilityMetrics('Generic/Performance/Mark/Seen', markers.length);\n        this.storeSupportabilityMetrics('Generic/Performance/Measure/Seen', measures.length);\n      }\n    } catch (e) {\n      // do nothing\n    }\n  }\n}"],"names":["FRAMEWORKS","getFrameworks","isBrowserScope","frameworks","Object","prototype","hasOwnProperty","call","window","document","querySelector","divs","querySelectorAll","i","length","err","detectReact","push","next","detectNextJS","detectVue","$nuxt","detectNuxtJS","detectAngular","detectAngularUniversal","detectSvelte","keys","find","prop","startsWith","detectSvelteKit","detectPreact","detectPreactSSR","detectAngularJs","navigator","userAgent","indexOf","detectElectron","Aggregate","AggregateBase","constructor","agentIdentifier","aggregator","scheduler","super","FEATURE_NAME","registerHandler","this","blocked","aborted","featureName","ee","SUPPORTABILITY_METRIC_CHANNEL","storeSupportabilityMetrics","bind","CUSTOM_METRIC_CHANNEL","storeEventMetrics","singleChecks","eachSessionChecks","on","concat","HarvestScheduler","onUnload","unload","harvest","body","take","drain","name","value","type","SUPPORTABILITY_METRIC","params","storeMetric","metrics","CUSTOM_METRIC","store","distMethod","loaderType","getRuntime","_document","nonce","currentScript","onDOMContentLoaded","forEach","framework","isWorkerScope","isFileProtocol","rules","getRules","validateRules","proxy","getConfiguration","assets","beacon","windowAddEventListener","evt","persisted","_performance","resourcesSent","agentRuntime","ajaxResources","internalUrls","isAjax","x","includes","initiatorType","performance","getEntriesByType","entry","some","y","ptid","Math","round","now","markers","measures","e","_defineProperty"],"sourceRoot":""}