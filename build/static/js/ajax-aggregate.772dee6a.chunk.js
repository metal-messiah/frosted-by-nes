"use strict";(self.webpackChunkfrosted_by_nes=self.webpackChunkfrosted_by_nes||[]).push([[898],{3620:(t,e,n)=>{n.d(e,{R:()=>a,z:()=>i});var r=[];function i(t){if(0===r.length)return!0;if(void 0===t.hostname)return!1;for(var e=0;e<r.length;e++){var n=r[e];if("*"===n.hostname)return!1;if(o(n.hostname,t.hostname)&&s(n.pathname,t.pathname))return!1}return!0}function a(t){if(r=[],t&&t.length)for(var e=0;e<t.length;e++){let n=t[e];if(!n)continue;0===n.indexOf("http://")?n=n.substring(7):0===n.indexOf("https://")&&(n=n.substring(8));const i=n.indexOf("/");let a,o;i>0?(a=n.substring(0,i),o=n.substring(i)):(a=n,o="");let[s]=a.split(":");r.push({hostname:s,pathname:o})}}function o(t,e){return!(t.length>e.length)&&e.indexOf(t)===e.length-t.length}function s(t,e){return 0===t.indexOf("/")&&(t=t.substring(1)),0===e.indexOf("/")&&(e=e.substring(1)),""===t||t===e}},6313:(t,e,n)=>{n.d(e,{AG:()=>u,FX:()=>d,n1:()=>c,uR:()=>h});var r=n(3973),i=n(8038),a=n(4355),o=Object.prototype.hasOwnProperty,s=64;function u(t,e,n){return t||0===t||""===t?e(t)+(n?",":""):"!"}function h(t,e){return e?Math.floor(t).toString(36):void 0===t||0===t?"":Math.floor(t).toString(36)}function d(t){var e=Object.hasOwnProperty("create")?Object.create(null):{},n=0;return function(r){if("undefined"===typeof r||""===r)return"";var i=new a.RR({agentIdentifier:t});r=String(r),i.shouldObfuscate()&&(r=i.obfuscateString(r));return o.call(e,r)?h(e[r],!0):(e[r]=n++,function(t){return"'"+t.replace(f,"\\$1")}(r))}}function c(t,e){var n=[];return(0,r.D)(t,(function(t,r){if(!(n.length>=s)){var a,o=5;switch(t=e(t),typeof r){case"object":r?a=e((0,i.P)(r)):o=9;break;case"number":o=6,a=r%1?r:r+".";break;case"boolean":o=r?7:8;break;case"undefined":o=9;break;default:a=e(r)}n.push([o,t+(a?","+a:"")])}})),n}var f=/([,\\;])/g},6193:(t,e,n)=>{n.r(e),n.d(e,{Aggregate:()=>b});var r=n(4572),i=n(4613),a=n(8038),o=n(6313),s=n(5894),u=n(8958),h=n(7661),d=n(3620),c=n(1458),f=n(9025),p=n(6477),l=n(1527);function g(){let{body:t,query:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t||e)try{const n=function(t){if(!t)return;Array.isArray(t)||(t=[t]);const e=[],n=[];for(let r of t){const t=m(r);t&&(e.push(t.operationName),n.push(t.operationType))}if(!n.length)return;return{operationName:e.join(","),operationType:n.join(","),operationFramework:"GraphQL"}}(y(t));if(n)return n;const r=m(function(t){if(!t||"string"!==typeof t)return;const e=new URLSearchParams(t);return y(Object.fromEntries(e))}(e));if(r)return r}catch(n){}}function m(t){if("object"!==typeof t||!t.query||"string"!==typeof t.query)return;const e=t.query.trim().match(/^(query|mutation|subscription)\s?(\w*)/),n=null===e||void 0===e?void 0:e[1];if(!n)return;return{operationName:t.operationName||(null===e||void 0===e?void 0:e[2])||"Anonymous",operationType:n,operationFramework:"GraphQL"}}function y(t){let e;if(!t||"string"!==typeof t&&"object"!==typeof t)return;if(e="string"===typeof t?JSON.parse(t):t,(null===(n=e)||void 0===n?void 0:n.constructor)!=={}.constructor&&!Array.isArray(e))return;var n;let r=!1;return r=Array.isArray(e)?e.some((t=>v(t))):v(e),r?e:void 0}function v(t){return!("object"!==typeof t||!t.query||"string"!==typeof t.query)}class b extends l.m{constructor(t,e){super(t,e,c.t);const n=(0,u.P_)(t),r=!1!==n.ajax.enabled;if((0,i.X)("xhr",q,this.featureName,this.ee),!r)return void this.drain();const l=(0,u.OP)(t).denyList;(0,d.R)(l);let m=[],y={},v=[];const b=this.ee,x=n.ajax.harvestTimeSeconds||10,S=n.ajax.maxPayloadSize||1e6;this.storeXhr=q,this.prepareHarvest=R,this.getStoredEvents=function(){return{ajaxEvents:m,spaAjaxEvents:y}},b.on("interactionSaved",(t=>{y[t.id]&&delete y[t.id]})),b.on("interactionDiscarded",(t=>{y[t.id]&&(y[t.id].forEach((function(t){m.push(t)})),delete y[t.id])}));const j=new h.o("events",{onFinished:function(t){t.retry&&v.length>0&&(m.unshift(...v),v=[])},getPayload:R},this);b.on("drain-".concat(this.featureName),(()=>{j.startTimer(x)})),this.drain();const A=(0,u.C5)(t).errorBeacon,O=n.proxy.beacon;function q(t,n,i,o,u){var h,c;if(n.time=i,c=t.cat?(0,a.P)([t.status,t.cat]):(0,a.P)([t.status,t.host,t.pathname]),e.store("xhr",c,t,n),r)if((0,d.z)(t)){(0,s.p)("bstXhrAgg",["xhr",c,t,n],void 0,f.D.sessionTrace,b);var l=this,v={method:t.method,status:t.status,domain:t.host,path:t.pathname,requestSize:n.txSize,responseSize:n.rxSize,type:u,startTime:i,endTime:o,callbackDuration:n.cbTime};if(l.dt&&(v.spanId=l.dt.spanId,v.traceId=l.dt.traceId,v.spanTimestamp=l.dt.timestamp),v.gql=t.gql=g({body:this.body,query:null===this||void 0===this||null===(h=this.parsedOrigin)||void 0===h?void 0:h.search}),v.gql&&(0,s.p)(p.xS,["Ajax/Events/GraphQL/Bytes-Added",(0,a.P)(v.gql).length],void 0,f.D.metrics,b),this.spaNode){var x=this.spaNode.interaction.id;y[x]=y[x]||[],y[x].push(v)}else m.push(v)}else t.hostname===A||O&&t.hostname===O?(0,s.p)(p.xS,["Ajax/Events/Excluded/Agent"],void 0,f.D.metrics,b):(0,s.p)(p.xS,["Ajax/Events/Excluded/App"],void 0,f.D.metrics,b)}function R(t){if(t=t||{},0===m.length)return null;for(var e=T(m,t.maxPayloadSize||S),n=[],r=0;r<e.length;r++)n.push({body:{e:e[r]}});return t.retry&&(v=m.slice()),m=[],n}function T(t,e,n){n=n||1;for(var r=[],i=function(t,e){e=e||t.length;for(var n=[],r=0,i=t.length;r<i;r+=e)n.push(new k(t.slice(r,r+e)));return n}(t,t.length/n),a=!1,o=0;o<i.length;o++){var s=i[o];if(s.tooBig(e)){if(1!==s.events.length){a=!0;break}}else r.push(s.payload)}return a?T(t,e,++n):r}function k(e){this.addString=(0,o.FX)(t),this.events=e,this.payload="bel.7;";for(var n=0;n<e.length;n++){var r=e[n],i=[(0,o.uR)(r.startTime),(0,o.uR)(r.endTime-r.startTime),(0,o.uR)(0),(0,o.uR)(0),this.addString(r.method),(0,o.uR)(r.status),this.addString(r.domain),this.addString(r.path),(0,o.uR)(r.requestSize),(0,o.uR)(r.responseSize),"fetch"===r.type?1:"",this.addString(0),(0,o.AG)(r.spanId,this.addString,!0)+(0,o.AG)(r.traceId,this.addString,!0)+(0,o.AG)(r.spanTimestamp,o.uR,!1)],a="2,",s=(0,o.n1)({...(0,u.C5)(t).jsAttributes||{},...r.gql||{}},this.addString);i.unshift((0,o.uR)(s.length)),a+=i.join(","),s&&s.length>0&&(a+=";"+s.join(";")),n+1<e.length&&(a+=";"),this.payload+=a}this.tooBig=function(t){return t=t||S,2*this.payload.length>t}}}}(0,r.Z)(b,"featureName",c.t)}}]);
//# sourceMappingURL=ajax-aggregate.772dee6a.chunk.js.map